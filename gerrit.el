;;; gerrit.el --- couchbase/erlang tools and functions -*- lexical-binding:t -*-

;;
;; curl 'https://review.couchbase.org/projects/' \
;; -H 'Cookie: JSESSIONID=node04ylfgwkp3pqs1acy9c7nyhnw2809.node0; GerritAccount=aTIPprsy6q6QZO99BNLN7GDasOKSp2Steq; XSRF_TOKEN=aTIPprtOf7ue5PDr1YzLzVmXPrHUbO5ZCa' | tail -n +2 | jq .[].id
;;
;; NOTE: you will have to change the headers for Cookie, GerritAccount and XSRF_TOKEN which you can take
;; from your browsers inspector window.

(defvar gerrit/projects '("-NorthScale-"
                          "-membase-"
                          "-sdks-"
                          "All-Users"
                          "Android-Couchbase"
                          "Android-Couchbase-SourceBuild"
                          "Android-EmptyApp"
                          "CapellaRESTAPIs"
                          "CouchbaseMock"
                          "Jython"
                          "TAF"
                          "analytics-dcp-client"
                          "analytics_ns_server"
                          "asterix-opt"
                          "backup"
                          "blance"
                          "bucket_engine"
                          "build"
                          "build-couchdb"
                          "build-infra"
                          "build-tools"
                          "buildbot-internal"
                          "cb-non-package-installer"
                          "cbagent"
                          "cbas"
                          "cbas-core"
                          "cbas-perf-support"
                          "cbas-ui"
                          "cbauditd"
                          "cbauth"
                          "cbbs"
                          "cbdep"
                          "cbflag"
                          "cbft"
                          "cbftx"
                          "cbgt"
                          "cbmonitor"
                          "cbmultimanager"
                          "cbq-gui"
                          "cbsasl"
                          "cbsummary"
                          "ch2"
                          "clog"
                          "cloud-build-tools"
                          "couch_rocks"
                          "couchbase-cli"
                          "couchbase-elasticsearch-connector"
                          "couchbase-encryption-testing"
                          "couchbase-examples"
                          "couchbase-exporter"
                          "couchbase-fluent-bit"
                          "couchbase-hadoop-plugin"
                          "couchbase-java-client"
                          "couchbase-jdbc-driver"
                          "couchbase-jruby-client"
                          "couchbase-jvm-clients"
                          "couchbase-jvm-core"
                          "couchbase-lite-android"
                          "couchbase-lite-android-ee"
                          "couchbase-lite-java"
                          "couchbase-lite-java-ee"
                          "couchbase-net-client"
                          "couchbase-operator"
                          "couchbase-operator-backup"
                          "couchbase-operator-logging"
                          "couchbase-php-client"
                          "couchbase-python-client"
                          "couchbase-service-broker"
                          "couchbase-spark-connector"
                          "couchbase-tableau-connector"
                          "couchbase-transactions-cxx"
                          "couchbase-transactions-dotnet"
                          "couchbase-transactions-java"
                          "couchdb"
                          "couchdbx-app"
                          "couchnode"
                          "couchsterix-test"
                          "couchstore"
                          "direct-nebula-test"
                          "docloader"
                          "docs"
                          "dotnet-couchbase-encryption"
                          "dparval"
                          "e2e-app"
                          "eagle-eye"
                          "ep-engine"
                          "eventing"
                          "eventing-ee"
                          "examinador"
                          "forestdb"
                          "geocouch"
                          "ghistogram"
                          "go-couchbase"
                          "go-slab"
                          "go_json"
                          "go_n1ql"
                          "gocb"
                          "gocb-transactions"
                          "gocbcore"
                          "gocbcore-transactions"
                          "gocbencryption"
                          "gocbmgr"
                          "godbc"
                          "goforestdb"
                          "golang"
                          "gomemcached"
                          "gometa"
                          "goutils"
                          "goxdcr"
                          "greenboard"
                          "healthchecker"
                          "hebrew"
                          "iErl"
                          "iOS-Couchbase"
                          "iOS-WorkerBee"
                          "icu4c"
                          "indexing"
                          "integration"
                          "java-couchbase-encryption"
                          "java-dcp-client"
                          "java-memcached-clientmgr"
                          "java_sdk_client"
                          "jepsen.couchbase"
                          "jinja"
                          "jtap"
                          "jvbucket"
                          "kafka-connect-couchbase"
                          "karajan"
                          "ken_test"
                          "ken_test2"
                          "ken_test3"
                          "kv_engine"
                          "libcbio"
                          "libconflate"
                          "libcouchbase"
                          "libcouchbase-build"
                          "libvbucket"
                          "logstats"
                          "machine-learning"
                          "magma"
                          "manifest"
                          "mc-loader"
                          "mccouch"
                          "membase"
                          "membase-cli"
                          "membasex"
                          "memcached"
                          "memcachetest"
                          "ming-test"
                          "mobile-service"
                          "mobile-testapps"
                          "moss"
                          "mossScope"
                          "moxi"
                          "multi-cluster-java"
                          "n1fty"
                          "nitro"
                          "node-couchbase-encryption"
                          "ns_server"
                          "patch_via_gerrit"
                          "perfrunner"
                          "phosphor"
                          "php-couchbase"
                          "php-ext-couchbase"
                          "plasma"
                          "platform"
                          "port_adaptor"
                          "portsigar"
                          "product-texts"
                          "ptrace"
                          "python-couchbase-commons"
                          "pyupr"
                          "qe_server_manager"
                          "query"
                          "query-ee"
                          "query-ui"
                          "regulator"
                          "retriever"
                          "sdk-qe"
                          "sdkd-cpp"
                          "sdkd-go"
                          "sdkd-java"
                          "sdkd-net"
                          "sdkdclient-ng"
                          "sequoia"
                          "server-cv"
                          "serversim"
                          "sigar"
                          "spidermonkey"
                          "spring"
                          "spymemcached"
                          "subjson"
                          "test"
                          "test-gerrit"
                          "testrunner"
                          "testrunner-py3"
                          "tlm"
                          "tools-common"
                          "transactions-fit-performer"
                          "txn_client"
                          "txn_server_java"
                          "udf-api"
                          "update_manifest_released"
                          "vbmap"
                          "vbucketmigrator"
                          "vellum"
                          "voltron"
                          "wallace"
                          "wallace_couchdb"
                          "workload-generator")
  "The list of gerrit projects.")

;; NOTE: this isn't complete and I have to figure out auth or something because it's not
;; the same as connecting to ns_server.. Example.. do we need credentials or should they
;; be optional?
;; (defun gerrit/grab-projects-list ()
;;   ""
;;   (aio-wait-for
;;    (aio-result (http/get-async-gerrit "https://review.couchbase.org/projects/" nil))))

(provide 'gerrit)
